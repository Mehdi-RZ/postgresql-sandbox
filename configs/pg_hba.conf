
# -----------------------------------------------------------------------
# Section: Local Unix socket access
# -----------------------------------------------------------------------
# General purpose:
#   - Provides access to PostgreSQL via Unix domain sockets, 
#     which are faster and more secure than TCP/IP for local connections.
#   - Typically used by applications running on the same host or container.
#   - Often the first line of defense for local apps.
#
# Specific purpose in this config:
#   - Allows all users to connect to all databases using Unix sockets inside 
#     the container or host machine.
#   - Uses secure password-based authentication (scram-sha-256).
local   all        all                             scram-sha-256

# -----------------------------------------------------------------------
# Section: Application access (loopback only)
# -----------------------------------------------------------------------
# General purpose:
#   - Provides TCP/IP access restricted to the local host (loopback interfaces).
#   - Commonly used for applications running on the same machine that connect 
#     via TCP instead of Unix sockets.
#   - Prevents remote access while allowing local services to authenticate.
#
# Specific purpose in this config:
#   - IPv4 localhost: 127.0.0.1/32
#       - Allows all users to connect to all databases via TCP on IPv4 loopback.
#   - IPv6 localhost: ::1/128
#       - Same for IPv6 loopback connections.
#   - Both use scram-sha-256 authentication to ensure password security.
host    all        all         127.0.0.1/32        scram-sha-256
host    all        all         ::1/128             scram-sha-256

# -----------------------------------------------------------------------
# Section: Docker / local network access
# -----------------------------------------------------------------------
# General purpose:
#   - Allows connections from local networks or container networks.
#   - Useful when running PostgreSQL in Docker or inside a LAN.
#   - Typically restricted to known internal subnets to reduce exposure.
#
# Specific purpose in this config:
#   - Subnet <DOCKER_PODMAN_NETWORK_RANGE> (Docker bridge or local network):
#       - Allows all users to connect to all databases from hosts in this subnet.
#       - Provides access to Docker containers or machines in this internal network.
#   - Authentication is scram-sha-256 for security.
# host    all        all         <DOCKER_PODMAN_NETWORK_RANGE>        scram-sha-256

# -----------------------------------------------------------------------
# Section: Reject all other connections
# -----------------------------------------------------------------------
# General purpose:
#   - Serves as a "catch-all" to prevent any unauthorized connections.
#   - Ensures that only explicitly allowed hosts can connect.
#
# Specific purpose in this config:
#   - Rejects all remaining IPv4 (0.0.0.0/0) and IPv6 (::/0) connections.
#   - Effectively blocks any host not listed in previous sections.
host    all        all         0.0.0.0/0           reject
host    all        all         ::/0                reject