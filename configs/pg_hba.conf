# ===========================================================
# PostgreSQL Host-Based Authentication (pg_hba.conf)
# ===========================================================

# TYPE  DATABASE        USER            ADDRESS                 METHOD
# -----------------------------------------------------------

# 1. Local connections (inside container)
local   all             all                                     scram-sha-256

# 2. Connections from Docker bridge network
# Allow all containers in the Compose network (usually 172.18.0.0/16)
host    all             all             172.18.0.0/16           scram-sha-256

# 3. Allow host machine (your PC) to connect via mapped port
# Replace 127.0.0.1/32 if you have multiple IPs
host    all             all             127.0.0.1/32           scram-sha-256

# 4. Optional: superuser access restricted to specific IP
host    all             postgres        127.0.0.1/32           scram-sha-256

# 5. Default catch-all (deny all)
host    all             all             0.0.0.0/0              reject